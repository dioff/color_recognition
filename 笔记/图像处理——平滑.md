图像处理——平滑

1.图像噪声

在采集、处理和传输过程中，数字图像可能会受到不同噪声的干扰，从而导致图像质量降低、图像变得模糊、图像特征被淹没，而图像平滑处理就是通过除去噪声来达到图像增强的目的。常见的图像噪声有椒盐噪声、高斯噪声等。

- 椒盐噪声（Salt-and-pepper Noise）也称为脉冲噪声，是一种随机出现的白点或黑点，具体表现为亮的区域有黑色像素，或是暗的区域有白色像素，又或是两者皆有。

![image-20230826032643503](/home/liu/Pictures/椒盐噪声.png)

- 高斯噪声（Gauss Noise）是指概率密度函数服从高斯分布（正态分布）的一类噪声。除了常用抑制噪声的方法外，常采用数理统计方法对高斯噪声进行抑制。

![image-20230826032643503](/home/liu/Pictures/高斯噪声.png)

2.图像平滑处理

​	从信号处理的角度分析，图像平滑就是去除其中的高频信息，保留低频信息，即可以通过低通滤波来去除图像中的噪声，实现对图像的平滑处理

​	根据滤波器的不同，滤波方式可分为均值滤波，高斯滤波和中值滤波

- 均值滤波（Mean Filtering）就是对图像的所有像素点进行取均值，即以一个方形区域为单位，将该区域的中心像素点赋值为区域内所有像素点的平均值

  ​	以下图为例，设定 3×3 领域为核，图（a）的中心像素点值为“226”。图（a）中的 9个像素点值之和除以像素点个数，所得值“122”就是中心像素点的新值，计算式如下：
  40 + 107 + 5 + 198 + 226 + 223 + 37 + 68 + 193 ÷ 9 = 122

  将中心像素点的值替换为计算得到的新值，如图（b）：

  ![image-20230826032643503](/home/liu/Pictures/均值滤波.png)

  

  均值滤波的算法简单、计算速度较快，但在图像去噪的同时也破环了图像的细节部分，从而导致图像清晰度降低

- 高斯滤波（Gauss Filtering）就是对图像的所有像素点进行加权平均，即以一个方形区域为单位，将其中心像素点赋值为该区域的加权平均值
  以下图为例，图（a）的中心像素点值为“226”，根据图（b）的权重分配计算加权平均值，所得值“164”就是中心像素点的新值，计算式如下：
  40 × 0.05 + 107 × 0.1 + 5 × 0.05 + 198 × 0.1 + 226 × 0.4 + 223 × 0.1 + 37 × 0.05 + 68× 0.1 + 193 × 0.05 = 164
  将中心像素点的值替换为计算得到的新值，如图（c）：

  ![image-20230826032643503](/home/liu/Pictures/高斯滤波.png)

- 中值滤波（Median Filtering）就是对图像的所有像素点进行取中值，即以一个方形区域为单位，将其中心像素点赋值为该区域的中值
  以下图为例，设定 3×3 领域为核，图（a）的中心像素点值为“226”，将图（a）中 9个像素点值按照从小到大或从大到小的顺序进行排列，即 5、37、40、68、107、193、198、223、226，中间值“107”就是中心像素点的新值

  ![image-20230826032643503](/home/liu/Pictures/中值滤波.png)

```python
import cv2

# 打开摄像头
cap = cv2.VideoCapture(0)

while True:
    # 读取每一帧图像
    ret, frame = cap.read()
    
    if not ret:
        break
    
    # 将彩色的图像转换成为灰度图像
    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)
    
    # 进行二值化处理（手动选定阈值/Otsu阈值处理）
    ret, binary = cv2.threshold(gray, 127, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU)
    # 自定义阈值
    # img2 = cv2.adaptiveThreshold(gray, 255, cv2.ADAPTIVE_THRESH_MEAN_C, cv2.THRESH_BINARY,5,3)
    
    
    # 平滑处理
    blur1 = cv2.blur(binary, (5, 5))
    blur2 = cv2.GaussianBlur(binary, (5, 5), 1)
    blur3 = cv2.medianBlur(binary, 5)
    
    # 对其进行镜像
    flipped = cv2.flip(blur3, 1)
    
    # 进行显示
    cv2.imshow('binary', flipped)
    
    # 退出Esc
    
    key = cv2.waitKey(1)
    if key == 27:
        break
    
cap.release()
cv2.destroyAllWindows()
```

- `cv2.blur(img, (5, 5))`：均值滤波。使用5x5的滤波核，将每个像素周围的邻域像素取平均值，从而实现平滑效果。
- `cv2.GaussianBlur(img, (5, 5), 1)`：高斯滤波。使用5x5的高斯核，标准差为1，根据高斯函数对像素进行加权平均，达到平滑效果。
- `cv2.medianBlur(img, 5)`：中值滤波。使用5x5的滤波窗口，将窗口内像素的中值作为中心像素的值，适用于去除椒盐噪声等。